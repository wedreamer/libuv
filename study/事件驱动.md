# 事件驱动

- 都做了什么
- 为其他功能提供了什么
- 为什么这么设计

## 都做了什么

这是一段简单的 libuv 示例代码

```c
#include <stdio.h>
#include <uv.h>

int main() {
    // 初始化 default_loop
    uv_loop_t *loop = uv_default_loop();

    printf("Default loop.\n");
    // 运行 default_loop
    uv_run(loop, UV_RUN_DEFAULT);

    // 关闭
    uv_loop_close(loop);
    return 0;
}
```

### uv_default_loop

```c
uv_loop_t* uv_default_loop(void) {
  // 全局静态变量, 保证 uv_default_loop 只会被初始化一次
  if (default_loop_ptr != NULL)
    return default_loop_ptr;

  // 初始化默认的 loop
  if (uv_loop_init(&default_loop_struct))
    return NULL;

  // 对应的指针, 也是全局静态变量, 方便访问, 避免 struct 的冗余拷贝
  default_loop_ptr = &default_loop_struct;
  return default_loop_ptr;
}
```



### uv_run

### uv_loop_close

